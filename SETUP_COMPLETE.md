# âœ… GitHub Packages CI/CD é…ç½®å®Œæˆ

## ğŸ‰ å·²å®Œæˆçš„é…ç½®

### 1. CI/CD å·¥ä½œæµé›†æˆ
- âœ… ä¸»å·¥ä½œæµ (`.github/workflows/ci.yml`)
  - è‡ªåŠ¨è¿è¡Œåç«¯å’Œå‰ç«¯æµ‹è¯•
  - æµ‹è¯•é€šè¿‡åæ„å»º Docker é•œåƒ
  - æ¨é€åˆ° GitHub Container Registry (ghcr.io)
  
- âœ… æ‰‹åŠ¨æ„å»ºå·¥ä½œæµ (`.github/workflows/docker-build.yml`)
  - æ”¯æŒæ‰‹åŠ¨è§¦å‘æ„å»º
  - å¯è‡ªå®šä¹‰é•œåƒæ ‡ç­¾

### 2. è‡ªåŠ¨æ„å»ºè§¦å‘æ¡ä»¶

| è§¦å‘äº‹ä»¶ | é•œåƒæ ‡ç­¾ | è¯´æ˜ |
|---------|---------|------|
| æ¨é€åˆ° `main` | `latest`, `sha-abc1234` | è‡ªåŠ¨éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬ |
| åˆ›å»ºæ ‡ç­¾ `v1.0.0` | `v1.0.0`, `1.0.0`, `1.0`, `1` | è¯­ä¹‰åŒ–ç‰ˆæœ¬å‘å¸ƒ |
| æ‰‹åŠ¨è§¦å‘ | è‡ªå®šä¹‰æ ‡ç­¾ | æµ‹è¯•æˆ–ç´§æ€¥å‘å¸ƒ |

### 3. å¤šå¹³å°æ”¯æŒ
- âœ… linux/amd64 (è‡ªåŠ¨æ„å»º)
- â¸ï¸ linux/arm64 (æ‰‹åŠ¨æ„å»ºå¯é€‰)

> ä¸ºç¡®ä¿æ„å»ºç¨³å®šæ€§å’Œé€Ÿåº¦ï¼Œä¸» CI/CD æµç¨‹é»˜è®¤åªæ„å»º amd64ã€‚å¦‚éœ€ arm64 æ”¯æŒï¼Œå¯é€šè¿‡æ‰‹åŠ¨æ„å»º workflow è§¦å‘ã€‚

### 4. æ–‡æ¡£å®Œå–„
- âœ… `DOCKER.md` - Docker ä½¿ç”¨æŒ‡å—
- âœ… `GITHUB_PACKAGES_DEPLOYMENT.md` - éƒ¨ç½²æŒ‡å—
- âœ… `README.md` - æ·»åŠ çŠ¶æ€å¾½ç« å’Œå¿«é€Ÿéƒ¨ç½²è¯´æ˜

## ğŸš€ ç«‹å³ä½¿ç”¨

### æ­¥éª¤ 1: æ¨é€ä»£ç è§¦å‘æ„å»º

```bash
# å·²è‡ªåŠ¨è§¦å‘ï¼
# åˆšæ‰çš„ git push ä¼šå¯åŠ¨ CI/CD æµç¨‹
```

### æ­¥éª¤ 2: ç›‘æ§æ„å»ºçŠ¶æ€

è®¿é—® GitHub Actions é¡µé¢æŸ¥çœ‹è¿›åº¦ï¼š
```
https://github.com/liulingyuncat/SMART_TEST/actions
```

### æ­¥éª¤ 3: æ„å»ºå®Œæˆåæ‹‰å–é•œåƒ

```bash
# ç­‰å¾…æ„å»ºå®Œæˆåï¼ˆçº¦ 5-10 åˆ†é’Ÿï¼‰
docker pull ghcr.io/liulingyuncat/smart_test:latest
```

### æ­¥éª¤ 4: è¿è¡Œå®¹å™¨

```bash
# ä½¿ç”¨ Docker Compose
docker-compose up -d

# æˆ–ç›´æ¥è¿è¡Œ
docker run -d -p 8443:8443 -p 16410:16410 ghcr.io/liulingyuncat/smart_test:latest
```

## ğŸ“Š å·¥ä½œæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Push to main    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Run Tests       â”‚ â† Backend + Frontend
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Go tests      â”‚
â”‚ âœ“ npm lint      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tests Passed?   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Yes
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Build Image     â”‚ â† Docker multi-stage build
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Platform:       â”‚
â”‚ - linux/amd64   â”‚
â”‚ - linux/arm64   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Push to GHCR    â”‚ â† ghcr.io/liulingyuncat/smart_test
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tags:           â”‚
â”‚ - latest        â”‚
â”‚ - sha-8f6443e   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Ready to use â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”— é‡è¦é“¾æ¥

- **GitHub Actions**: https://github.com/liulingyuncat/SMART_TEST/actions
- **Container Registry**: https://github.com/liulingyuncat/SMART_TEST/pkgs/container/smart_test
- **é•œåƒæ‹‰å–å‘½ä»¤**:
  ```bash
  docker pull ghcr.io/liulingyuncat/smart_test:latest
  ```

## ğŸ“ ç‰ˆæœ¬å‘å¸ƒç¤ºä¾‹

### å‘å¸ƒæ–°ç‰ˆæœ¬

```bash
# 1. ç¡®ä¿ä»£ç å·²æäº¤
git add .
git commit -m "feat: your feature description"

# 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag v1.0.0

# 3. æ¨é€æ ‡ç­¾
git push origin v1.0.0
```

è¿™å°†è‡ªåŠ¨æ„å»ºå¹¶æ¨é€ä»¥ä¸‹æ ‡ç­¾çš„é•œåƒï¼š
- `ghcr.io/liulingyuncat/smart_test:v1.0.0`
- `ghcr.io/liulingyuncat/smart_test:1.0.0`
- `ghcr.io/liulingyuncat/smart_test:1.0`
- `ghcr.io/liulingyuncat/smart_test:1`

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡æ„å»º**: çº¦éœ€ 5-10 åˆ†é’Ÿ
2. **åç»­æ„å»º**: åˆ©ç”¨ç¼“å­˜ï¼Œçº¦éœ€ 2-3 åˆ†é’Ÿ
3. **çŠ¶æ€å¾½ç« **: README ä¸­çš„å¾½ç« ä¼šå®æ—¶æ˜¾ç¤ºæ„å»ºçŠ¶æ€
4. **é•œåƒå¤§å°**: çº¦ 100-150 MB (å‹ç¼©å)
5. **å¹¶å‘æ„å»º**: æ”¯æŒåŒæ—¶æ„å»ºå¤šä¸ªå¹³å°

## ğŸ¯ ä¸‹ä¸€æ­¥

- [ ] ç­‰å¾…é¦–æ¬¡æ„å»ºå®Œæˆ
- [ ] æµ‹è¯•æ‹‰å–é•œåƒ
- [ ] ä½¿ç”¨ Docker Compose éƒ¨ç½²
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
- [ ] è®¾ç½®è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Docker ä½¿ç”¨æŒ‡å—](./DOCKER.md)
- [GitHub Packages éƒ¨ç½²æŒ‡å—](./GITHUB_PACKAGES_DEPLOYMENT.md)
- [é¡¹ç›®ä¸»æ–‡æ¡£](./README.md)

---

**é…ç½®å®Œæˆæ—¶é—´**: 2026-01-10  
**æäº¤å“ˆå¸Œ**: 8f6443e  
**é¦–æ¬¡æ„å»º**: è‡ªåŠ¨è§¦å‘ä¸­...
